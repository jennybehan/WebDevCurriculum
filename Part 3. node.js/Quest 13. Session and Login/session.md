## Checklist

### 쿠키란 무엇일까요?

* 쿠키는 대개 웹 서버와 웹 브라우저간에 전송되는 작은 데이터 조각이다. 서버는 특정 사용자와 관련된 정보를 저장할 수 있다.
* 쿠키는 클라이언트(브라우저)에서 관리한다.
* 이름=값 형태로 쿠키 구별에 사용되는 이름과 그에 대한 값이 들어간다. 그 외에 유효시간(쿠키 유지시간 `expires`), 도메인(쿠키를 전송할 도메인 `domain`), 경로(쿠키를 전송할 요청경로 `path`) 등을 설정한다.
* 서버와 클라이어트 간 통신을 할 때 서버는 클라이언트가 누구인지 인증을 계속해야 한다.
* HTTP 프로토콜이 connectionless(클라이언트가 요청에 대한 응답을 받으면 그 연결을 끊어버리는 특징), stateless(통신이 끝나면 상태를 유지하지 않음) 하기 때문에 이러한 특징을 해결하기 위해, 즉 사용자에 대한 인증을 유지하기 위해 쿠키와 세션을 사용한다.

* 쿠키의 일반적인 용도 중 하나는 세션 데이터를 저장하는 것이다.

1. 서버는 웹 브라우저로 전송되어 일정 기간 (만료 시간이라고 함) 저장된 쿠키를 발급한다.
2. 사용자가 웹 서버에 대한 후속 요청을 하면 이 쿠키가 요청과 함께 전송되고 서버는 그 요청에 포함 된 정보를 읽을 수 있다.
3. 서버는 필요한 경우 쿠키를 조작 한 다음 브라우저로 다시 전송할 수 있다.
4. 쿠키가 만료 될 때까지 요청할 때마다 브라우저는 쿠키를 서버로 다시 보낸다.

#### 쿠키는 어떤 식으로 동작하나요?

* 어떤 브라우저에서 향후 동일한 도메인의 개체를 요청할 경우, 해당 브라우저에서는 동일한 데이터 문자열을 원본 서버에 다시 보낸다. 
* 이 데이터는 `Set-Cookie`라는 HTTP 헤더의 형식으로 웹 서버에서 전송한다. 브라우저에서는 쿠키를 `Cookie`라는 HTTP 헤더의 형식으로 서버에 다시 보낸다.
* 쿠키는 크게 세션 쿠키와 지속 쿠키 두 가지 타입으로 나눌 수 있다.
  * 세션 쿠키는 사용자가 사이트를 탐색할 때, 관련한 설정과 선호 사항들을 저장하는 임시 쿠키다.
  * 세션 쿠키는 사용자가 브라우저를 닫으면 삭제된다.
  * 지속 쿠키는 삭제되지 않고 더 길게 유지될 수 있다.
  * 지속 쿠키는 디스크에 저장되어, 브라우저를 닫거나 컴퓨터를 재시작하더라도 남아있다.
  * 지속 쿠키는 사용자가 주기적으로 방문하는 사이트에 대한 설정 정보나 로그인 이름을 유지하려고 사용한다.
  * 세션 쿠키와 지속 쿠키의 다른 점은 파기되는 시점뿐이다.
* Discard 파라미터가 설정되어 있거나 파기되기까지 남은 시간을 가리키는 `Expires` 혹은 `Max-Age` 파라미터가 없으면 세션 쿠키가 된다.
* 쿠키는 어떤 정보든 포함할 수 있지만, 서버가 사용자 추적 용도로 생성한 유일한 단순 식별 번호만 포함하기도 한다.

#### 쿠키는 어떤 식으로 서버와 클라이언트 사이에 정보를 주고받나요?

브라우저가 서버 관련 정보를 저장하고, 사용자가 해당 서버에 접근할 때마다 그 정보를 함께 전송하게 한다.
브라우저는 쿠키 정보를 저장할 책임이 있는데, 이 시스템을 '클라이언트 측 상태'라고 한다. 쿠키 명세에서 이것의 공식적인 이름은 'HTTP 상태 관리 체계'이다.

1. 처음에 사용자가 웹 사이트에 방문하면 웹 서버는 사용자에 대한 정보를 알 수 없다.
2. 웹 서버는 사용자가 다시 돌아왔을 때 해당 사용자를 식별하기 위한 유일한 값을 쿠키에 할당한다.
3. 쿠키는 임의의 이름=값 형태의 리스트를 가지고, 그 리스트는 `Set-Cookie` 혹은 `Set-Cookie2`(확장 헤더) 같은 HTTP 응답 헤더에 기술되어 사용자에게 전달한다.
4. 브라우저는 서버로 온 `Set-Cookie` 혹은 `Set-Cookie2` 헤더에 있는 쿠키 콘텐츠를 브라우저 쿠키 데이터베이스에 저장한다.
5. 사용자가 미래에 같은 사이트를 방문하면 브라우저는 서버가 이 사용자에게 할당했던 쿠키를 Cookie 요청 헤더에 기술해 전송한다.

브라우저는 쿠키를 생성한 서버에게만 쿠키에 담긴 정보를 전달한다.

### 웹 어플리케이션의 세션이란 무엇일까요?

웹 어플리케이션이 상태를 저장할 수 있도록 해주는 것. 사용자가 페이지 A에서 취한 행동을 기반으로 다른 페이지 B를 표시할 수 있다.
세션이 없다면 어플리케이션은 상태가 없으므로 유용함이 떨어진다.

(로그인을 통한 서비스를 제공하는 이상 모든 페이지에 접근하는 때에 세션이 갱신될 수 있도록 해주어야 한다.)

#### 세션의 내용은 어디에, 어떤 식으로 저장되나요?

* 세션 데이터는 쿠키 자체에 저장되지 않고 세션 ID만 저장된다. 세션 데이터는 서버 측에 저장된다.
* 서버에 저장되며 스트링으로만 저장되는 쿠키와 달리 어떠한 형태의 객체로든 저장 가능하다.
  * 쿠키를 기반으로 하고 있지만 정보를 브라우저에 저장하는 쿠키와 달리 세션은 서버에서 관리한다.(로그인 등에 사용)
  * 서버에서는 클라이언트를 구분하기 위해 세션 ID를 부여하며 브라우저를 종료할 때까지 인증상태를 유지한다.
  * 사용자 정보를 서버에 저장하므로 쿠키보다 보안성은 좋지만 사용자가 많아질 경우 서버 메모리를 많이 차지하게 된다.

* 메모리 캐시에 저장하기
  * 메모리 캐시는 키 - 값 데이터의 작은 덩어리를 저장할 수있는 장소이다. 세션 정보를 저장하는 데 사용되는 메모리 캐시의 예로는 Redis와 Memcached가 있다.
  * 세션 데이터를 메모리 캐시에 저장할 때 서버는 여전히 쿠키를 사용하지만 쿠키에는 고유 한 sessionId 만 포함된다. 이 sessionId는 서버에서 저장소를 조회하는 데 사용된다.
  * 메모리 캐시를 사용할 때 쿠키에는 세션 ID 만 포함된다. 이렇게하면 개인 사용자 정보가 쿠키에 노출 될 위험이 사라진다.

* [참고](https://nodewebapps.com/2017/06/18/how-do-nodejs-sessions-work/)

## Quest

* Quest 12에서 수행했던 메모장에 로그인 기능을 넣고자 합니다.
  * 사용자는 딱 세 명만 존재한다고 가정하고, 아이디와 비밀번호, 사용자의 닉네임은 하드코딩해도 무방합니다.
  * 로그인했을 때 해당 사용자가 이전에 작업했던 탭들과 선택된 탭, 커서 위치 등의 상태가 로딩 되어야 합니다.

## 스터디 노트

### sync/async, blocking/non-blocking??

* 동기 : 순서있게 일(I/O등)을 한다.
* 비동기 : 신호를 보내고, 받는다.(무순서)
* 블록킹 : 리턴값에 신뢰성이 있다(대신에 기다림)
* 넌블록킹 : 리턴값은 대개 무조건 false다.(바로 리턴하는 대신, 신뢰성이 없음)